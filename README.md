# Caching Proxy

CLI-инструмент для запуска кэширующего прокси-сервера. Он перенаправляет запросы на указанный origin-сервер и кэширует ответы. Повторные запросы обслуживаются напрямую из кэша, что снижает нагрузку на целевой сервер.

## Особенности
*   Проксирование HTTP запросов.
*   Кэширование ответов (учитывается путь, query-параметры, метод и тело запроса).
*   Сохранение кэша в файл (`cache.gob`), что позволяет кэшу "переживать" перезапуски.
*   Добавление заголовка `X-Cache` (HIT или MISS).
*   CLI-интерфейс для запуска сервера и очистки кэша.


## Использование

### Запуск сервера

Для запуска прокси-сервера используйте флаги `--port` и `--origin`:

```bash
# Запуск прокси на порту 3000, перенаправляющего на http://dummyjson.com
./caching-proxy --port 3000 --origin http://dummyjson.com
```

Теперь можно делать запросы к локальному порту:

```bash
curl -i http://localhost:3000/products/1
```

*   **Первый запрос**: `X-Cache: MISS` (данные загружены с сервера и сохранены).
*   **Второй запрос**: `X-Cache: HIT` (данные отданы из кэша).

### Очистка кэша

Чтобы полностью очистить кэш, выполните:

```bash
./caching-proxy --clear-cache
```

## Технические детали
*   **LRU Cache**: Используется алгоритм вытеснения LRU (Least Recently Used) с O(1) сложностью доступа.
*   **Персистентность**: Кэш сохраняется в файл `cache.gob` (включая порядок элементов) и восстанавливается при старте.
*   Ключ кэширования формируется как комбинация: `METHOD:PATH?QUERY|BODY_HASH`.

### Дополнительные опции
Вы можете настроить размер кэша (количество элементов) с помощью флага `--cache-size` (по умолчанию 100):

```bash
./caching-proxy --port 3000 --origin http://dummyjson.com --cache-size 10
```
